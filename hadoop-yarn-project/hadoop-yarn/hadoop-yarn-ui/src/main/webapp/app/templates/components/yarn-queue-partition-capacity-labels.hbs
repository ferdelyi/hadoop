{{!
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
}}

<h4>Queue Status for Partition</h4>
{{!
/scheduler/schedulerInfo/queues/queue[1]/resources/resourceUsagesByPartition[2]/used/resourceInformations/resourceInformation[1]/name[text()='memory-mb']
/scheduler/schedulerInfo/queues/queue[1]/resources/resourceUsagesByPartition[2]/used/resourceInformations/resourceInformation[1]/value/text('2048')
/scheduler/schedulerInfo/queues/queue[2]/capacities/queueCapacitiesByPartition/usedCapacity[text()='37.883835']
}}
<ul>
  <li class="queues-list">
    <span class="label-key" title=" Aka. 'Used Resources': is the total of the resources consumed within the queue for the given partition <memory MB, vCores, %>.
    The percentage value calculated differently for the DefaultResourceCalculator and for the DominantResourceCalculator."><b>used capacity:</b></span>
    <span class="label-value"><b>{{data.usedCapacity}}%</b></span>
    <span class="label-value"><ul>{{#each data.used.resourceInformations.resourceInformation as | resource|}}<li>{{resource.name}}: {{resource.value}}</li>{{/each}}</ul></span>
  </li>


  <li class="yarn-list">
    <span class="label-key" title="Absolute Used Capacity: percentage referring to the used memory from the total available memory for the partition">absolute used:</span>
    <span class="label-value">{{data.absoluteUsedCapacity}}%</span>
  </li>

  {{!
  /scheduler/schedulerInfo/queues/queue[2]/capacities/queueCapacitiesByPartition[2]/absoluteCapacity[text()='85.44922']
  }}
  <li class="yarn-list">
    <span class="label-key" title="Absolute Configured Capacity: percentage referring to the configured memory from the total available memory for the partition. This value  will be different from the configured capacity only when the parent queue is not the root queue.">absolute configured capacity:</span>
    <span class="label-value">{{data.absoluteCapacity}}%</span>
  </li>
  {{!
  /scheduler/schedulerInfo/queues/queue[2]/absoluteMaxCapacity[text()='100.0']
  }}
  <li class="yarn-list">
    <span class="label-key" title="Absolute Configured Max Capacity: percentage referring to the configured maximum memory from the total available memory for the partition. This value will be different from the configured max capacity only when the parent queue is not the root queue.">absolute configured max capacity:</span>
    <span class="label-value">{{data.absoluteMaxCapacity}}%</span>
  </li>


  {{#if data.isWeightMode}}

    <li class="yarn-list">
      <span class="label-key" title="Configured Weight">weight:</span>
      <span class="label-value">{{data.weight}}</span>
    </li>
    <li class="yarn-list">
      <span class="label-key" title="Normalized Weight">normalized weight:</span>
      <span class="label-value">{{data.normalizedWeight}}</span>
    </li>

  {{else}}

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/capacities/queueCapacitiesByPartition[2]/capacity[text()='85.44922']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Configured Capacity: percentage = 'configured memory of the queue' / 'total available memory for the partition' * 100">configured capacity:</span>
      <span class="label-value">{{data.capacity}}%</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/maxCapacity[text()='100.0']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Configured Max Capacity: percentage = 'configured maximum memory of the queue' / 'total available memory for the partition' * 100">configured max capacity:</span>
      <span class="label-value">{{data.maxCapacity}}%</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/capacities/queueCapacitiesByPartition/configuredMinResource/memory[text()='54060']
    /scheduler/schedulerInfo/queues/queue[2]/capacities/queueCapacitiesByPartition/configuredMinResource/vCores[text()='5']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Configured min capacity">configured min capacity:</span>
      <span class="label-value"><ul>{{#each data.configuredMinResource.resourceInformations.resourceInformation as | resource|}}<li>{{resource.name}}: {{resource.value}}</li>{{/each}}</ul></span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/capacities/queueCapacitiesByPartition/configuredMaxResource/memory[text()='163840']
    /scheduler/schedulerInfo/queues/queue[2]/capacities/queueCapacitiesByPartition/configuredMaxResource/vCores[text()='16']
    }}
    <li class="yarn-list">
      <span class="label-key"  title="Configured max capacity">configured max capacity:</span>
      <span class="label-value"><ul>{{#each data.configuredMaxResource.resourceInformations.resourceInformation as | resource|}}<li>{{resource.name}}: {{resource.value}}</li>{{/each}}</ul></span>
    </li>
  {{/if}}

  {{!
  /scheduler/schedulerInfo/queues/queue[1]/capacities/queueCapacitiesByPartition[1]/effectiveMinResource/resourceInformations/resourceInformation[1]/name[text()='memory-mb']
  /scheduler/schedulerInfo/queues/queue[1]/capacities/queueCapacitiesByPartition[1]/effectiveMinResource/resourceInformations/resourceInformation[1]/value[text()='2703']
  }}

  <li class="yarn-list">
    <span class="label-key"  title="Effective min capacity">effective min capacity:</span>
    <span class="label-value"><ul>{{#each data.effectiveMinResource.resourceInformations.resourceInformation as | resource|}}<li>{{resource.name}}: {{resource.value}}</li>{{/each}}</ul></span>
  </li>

  {{!
  /scheduler/schedulerInfo/queues/queue[1]/capacities/queueCapacitiesByPartition[1]/effectiveMaxResource/resourceInformations/resourceInformation[1]/name[text()='memory-mb']
  /scheduler/schedulerInfo/queues/queue[1]/capacities/queueCapacitiesByPartition[1]/effectiveMaxResource/resourceInformations/resourceInformation[1]/value[text()='2703']
  }}
  <li class="yarn-list">
    <span class="label-key"  title="Effective max capacity">effective max capacity:</span>
    <span class="label-value"><ul>{{#each data.effectiveMaxResource.resourceInformations.resourceInformation as | resource|}}<li>{{resource.name}}: {{resource.value}}</li>{{/each}}</ul></span>
  </li>

  {{!
  /scheduler/schedulerInfo/queues/queue[2]/capacities/queueCapacitiesByPartition/maxAMLimitPercentage[text()='10.0']
  }}
  <li class="yarn-list">
    <span class="label-key" title="Aka. Configured Max Application Master Limit">max am limit percentage:</span>
    <span class="label-value">{{data.maxAMLimitPercentage}}%</span>
  </li>

  {{#if data.isLeafQueue}}
    {{!
    /scheduler/schedulerInfo/queues/queue[1]/resources/resourceUsagesByPartition[1]/amLimit/resourceInformations/resourceInformation[1]/name[text()='memory-mb']
    /scheduler/schedulerInfo/queues/queue[1]/resources/resourceUsagesByPartition[1]/amLimit/resourceInformations/resourceInformation[1]/value[text()='3072']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Max Application Master Resources">max am resources:</span>
      <span class="label-value"><ul>{{#each data.amLimit.resourceInformations.resourceInformation as | resource|}}<li>{{resource.name}}: {{resource.value}}</li>{{/each}}</ul></span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[1]/resources/resourceUsagesByPartition[2]/amUsed/resourceInformations/resourceInformation[1]/name[text()='memory-mb']
    /scheduler/schedulerInfo/queues/queue[1]/resources/resourceUsagesByPartition[2]/amUsed/resourceInformations/resourceInformation[1]/value[text()='1024']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Used Application Master Resources">used am resources:</span>
      <span class="label-value"><ul>{{#each data.amUsed.resourceInformations.resourceInformation as | resource|}}<li>{{resource.name}}: {{resource.value}}</li>{{/each}}</ul></span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[1]/resources/resourceUsagesByPartition[2]/userAmLimit/resourceInformations/resourceInformation[1]/name[text()='memory-mb']
    /scheduler/schedulerInfo/queues/queue[1]/resources/resourceUsagesByPartition[2]/userAmLimit/resourceInformations/resourceInformation[1]/value[text()='0']

    }}
    <li class="yarn-list">
      <span class="label-key" title="Max Application Master Resources Per User">max am resources per user:</span>
      <span class="label-value"><ul>{{#each data.userAmLimit.resourceInformations.resourceInformation as | resource|}}<li>{{resource.name}}: {{resource.value}}</li>{{/each}}</ul></span>
    </li>
  {{/if}}
</ul>

{{#if data.isLeafQueue}}
  <h4>Queue Status</h4>
  <ul>
    {{!
    /scheduler/schedulerInfo/queues/queue[2]/numActiveApplications[text()='1']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Aka.: Num Schedulable Applications. Shows the #apps running in the queue regardless of the partition.">#active applications:</span>
      <span class="label-value">{{data.numActiveApplications}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/numPendingApplications[text()='0']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Aka.: Non-Schedulable Applications. Shows the #apps pending in the queue regardless of the partition.">#pending applications:</span>
      <span class="label-value">{{data.numPendingApplications}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/numContainers[text()='2']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Number of Containers">#containers:</span>
      <span class="label-value">{{data.numContainers}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/maxApplications[text()='3299']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Max Applications">max applications:</span>
      <span class="label-value">{{data.maxApplications}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/maxApplicationsPerUser[text()='3299']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Max Applications Per User">max applications per user:</span>
      <span class="label-value">{{data.maxApplicationsPerUser}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/userLimitFactor[text()='1.0']
    Aka. in UI 1 as "Configured Minimum User Limit Percent"
    }}
    <li class="yarn-list" title="User Limit">
      <span class="label-key">user limit:</span>
      <span class="label-value">{{data.userLimit}}%</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/userLimit[text()='100.0']
    Aka. in UI 1 as "Configured User Limit Factor"
    }}
    <li class="yarn-list" title="User Limit Factor">
      <span class="label-key">user limit factor:</span>
      <span class="label-value">{{data.userLimitFactor}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/nodeLabels[text()='*']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Accessible Node Labels">accessible node labels:</span>
      <span class="label-value">{{data.nodeLabels}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/orderingPolicyInfo[text()='fifo']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Ordering Policy">ordering policy:</span>
      <span class="label-value">{{data.orderingPolicyInfo}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/preemptionDisabled[text()='false']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Preemption Disabled">preemption disabled:</span>
      <span class="label-value">{{data.preemptionDisabled}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/intraQueuePreemptionDisabled[text()='true']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Intra-queue Preemption Disabled">intra-queue preemption disabled:</span>
      <span class="label-value">{{data.intraQueuePreemptionDisabled}}</span>
    </li>

    {{!
    /scheduler/schedulerInfo/queues/queue[2]/defaultPriority[text()='0']
    }}
    <li class="yarn-list">
      <span class="label-key" title="Default Application Priority">default application priority:</span>
      <span class="label-value">{{data.defaultPriority}}</span>
    </li>


    {{#if data.isFlexibleDynamicQueue}}
      <li class="yarn-list">
        <span class="label-key" title="Flexible Dynamic Queue">flexible dynamic queue:</span>
        <span class="label-value">{{data.isFlexibleDynamicQueue}}</span>
      </li>
    {{/if}}
  </ul>
{{/if}}